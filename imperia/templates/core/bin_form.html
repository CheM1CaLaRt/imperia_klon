{% extends "base.html" %}
{% block title %}{% if mode == 'create' %}Новая ячейка{% else %}Изменить ячейку{% endif %} — IndigoFlow{% endblock %}
{% block content %}
<div class="card">
  <div class="card-header">
    <div>
      <h1 class="card-title">
        {% if mode == 'create' %}Новая ячейка{% else %}Изменить ячейку{% endif %}
      </h1>
      <p class="card-subtitle">Склад: {{ warehouse.code }} — {{ warehouse.name }}</p>
    </div>
    <a class="btn btn-secondary" href="{% url 'warehouse_detail' warehouse.pk %}">← Назад</a>
  </div>

  <form method="post" style="padding-top:20px;display:grid;gap:16px">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
      <div style="padding:12px 16px;background:#fee2e2;border:1px solid #fecaca;border-radius:12px;color:#7f1d1d;font-size:14px">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    <div class="field">
      <label class="field label">Код ячейки</label>
      {{ form.code }}
      {% if form.code.errors %}<div style="color:#ef4444;font-size:13px;margin-top:4px">{{ form.code.errors }}</div>{% endif %}
    </div>

    <div class="field">
      <label class="field label">Описание</label>
      {{ form.description }}
      {% if form.description.errors %}<div style="color:#ef4444;font-size:13px;margin-top:4px">{{ form.description.errors }}</div>{% endif %}
      <div style="margin-top:6px;font-size:13px;color:var(--muted)">Опциональное описание ячейки</div>
    </div>

    <div style="display:flex;gap:12px;padding-top:12px;border-top:1px solid var(--border)">
      <button type="submit" class="btn btn-primary" style="flex:1">Сохранить</button>
      <a class="btn btn-secondary" href="{% url 'warehouse_detail' warehouse.pk %}">Отмена</a>
    </div>
  </form>
</div>
{% endblock %}
